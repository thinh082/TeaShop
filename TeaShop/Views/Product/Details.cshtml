@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model SanPham
<section class="home-slider owl-carousel">

    <div class="slider-item" style="background-image: url(images/bg_3.jpg);" data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row slider-text justify-content-center align-items-center">

                <div class="col-md-7 col-sm-12 text-center ftco-animate">
                    <h1 class="mb-3 mt-5 bread">Product Detail</h1>
                    <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span>Product Detail</span></p>
                </div>

            </div>
        </div>
    </div>
</section>

<section class="ftco-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 mb-5 ftco-animate">
                <a href="images/menu-2.jpg" class="image-popup"><img src="~/images/@Model.Hinh" class="img-fluid" alt="Colorlib Template"></a>
            </div>
            <div class="col-lg-6 product-details pl-md-5 ftco-animate">
                <h3>@Model.TenSp</h3>
                <input type="hidden" name="MaSp" value="@Model.MaSp" id="MaSp" />
                <p>
                    @Model.MoTa
                </p>
                <div class="row mt-4">
                    <div class="w-100"></div>
                    <div class="input-group col-md-6 d-flex mb-3">
                        <p>Số Lượng:<input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100"></p>
                    </div>
                </div>
                <input onclick="ThemSP()" class="btn btn-primary py-3 px-5" readonly value="Thêm vào vỏ hàng" />
            </div>
        </div>
    </div>
</section>

<section class="ftco-section">
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
            <div class="col-md-7 heading-section ftco-animate text-center">
                <span class="subheading">Discover</span>
                <h2 class="mb-4">Sản Phẩm bán chạy nhất</h2>
            </div>
        </div>
        <div class="row">
            @foreach(SanPham item in ViewBag.Top4)
            {
                <div class="col-md-3">
                    <div class="menu-entry">
                        <input value="@item.MaSp" type="hidden" id="MaSpTop4" />
                        <a href="#" class="img" style="background-image: url(~/images/@item.Hinh);"></a>
                        <div class="text text-center pt-4">
                            <h3><a href="#">@item.TenSp</a></h3>
                            <p>@item.MoTa</p>
                            <p class="price"><span>@item.Gia VND</span></p>
                            <p><input class="btn btn-primary btn-outline-primary" readonly value="Thêm vào giỏ hàng" onclick="ThemSP_Top4()" /></p>
                        </div>
                    </div>
                </div>
            }
            
        </div>
    </div>
</section>
<script>
    function ThemSP_Top4(){
        const Para ={
            MaSp : document.getElementById("MaSpTop4").value,
            SoLuong : 1
        }
        fetch('/Cart/ThemSP',{
            method:'POST',
            headers:{
                "content-type":"application/json"
            },
            body:JSON.stringify(Para)
        }).then(response=>response.json())
        .then(data=>{
            if(data.success)
            {
                alert("Thêm thành công!");
            }else{
                alert("Thêm thất bại!")
            }
        }).catch(error=>{
            alert("LỖI!"+error.message)
        })
    }
    //////////////////
    function ThemSP(){
        const Para ={
            MaSp : document.getElementById("MaSp").value,
            SoLuong : parseInt(document.getElementById("quantity").value)
        }
        fetch('/Cart/ThemSP',{
            method:'POST',
            headers:{
                "content-type":"application/json"
            },
            body:JSON.stringify(Para)
        }).then(response=>response.json())
        .then(data=>{
            if(data.success)
            {
                alert("Thêm thành công!");
            }else{
                alert("Thêm thất bại!")
            }
        }).catch(error=>{
            alert("LỖI!"+error.message)
        })
    }

    // </script>